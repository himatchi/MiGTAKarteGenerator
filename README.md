# MiGTAKarteGenerator

## ライセンス
このソフトウェアはMITライセンスで提供されます。
- 商用非商用問わず無料で使用できます。
- 使用の結果得た不利益に対して一切の責任を負いません。
- 不具合の修正について何らかの保証は行わず、ありのまま(As-Is)で提供されます。
- 改変などは許可されますが、その成果物に対してはhimatchiのクレジット表示が必要となります。（詳しい条件はLICENSEファイルをご覧ください。）

## インストール
- KarteGenerator.htmlとKarteGenerator.jsを任意のフォルダに配置してください。
- インストール後に別のフォルダへ移動する場合は、事前に設定ファイルをエクスポートすることをお勧めします。（パスに依存してブラウザのローカルストレージに情報が保存されるため）

## 使い方

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/5610c503-e4b2-4821-a8d2-dd35a08f356a)

1. 治療者：自分の名前を入力します。カルテの「治療者」の欄に出力されます。
2. 日時：現在の日時を入力します。空欄の場合は「文書を生成」ボタンを押した時刻が出力されます。
3. 現在時刻ボタン：日時に現在の日時を自動入力します。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/127bc3ba-2e5d-44a8-9dad-7d14f7dc7fef)

4. 名前検索：患者様の名前を入力し、検索します。
5. 名前検索結果：「名前検索」に記入した文字列を含むお名前を検索し、一覧表示します。
   選択している名前がカルテの「Name:」に出力されます。
6. 直接入力：「名前検索」に記入している文字列をそのままカルテに出力するモードにします。
   単発の偽名など、名前登録をしたくない場合などに使用します。
   また、;や；で区切ることで複数の名前を同時に入力が可能です。
7. 複数入力：複数入力モードにします。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/50cd4c18-9cc2-46f7-b0ea-f4f49ce5b4f9)

名前検索結果で名前を選択し、「追加」ボタンを押すと、右側の窓に名前が追加されます。
カルテには右側の窓に並んでいる名前が列挙されます。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/36477030-dc3a-4d3a-936d-0c98a0364814)

8. 場所検索：患者様が倒れていた場所の名前を入力し、検索します。
   患者様の仲間が病院に運んできた場合、詳しい場所が不明のため病院内としても問題ありません。
9. 場所検索結果：「場所検索」に記入した文字列を含む場所を検索し、一覧表示します。
    選択した場所はカルテの「場所：」に出力されます。
10. 直接入力：「場所検索」に記入している文字列をそのままカルテに出力するモードにします。
    あまりダウンのない場所など、単発で記入したい場合にしようします。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/259ce6f0-4434-41cc-8a6a-bfc6a342e574)

11. 症状：患者様の症状を記入します。
    - 打撲：殴られている場合にチェックします。
    - 出血：出血している場合にチェックします。
    - 銃創：撃たれている場合にチェックします。
    - 火傷：火傷している場合にチェックします。
    - 気絶：ダウン状態の場合にチェックします。 
12. 搬送：搬送した場合にチェックを入れます。カルテの対処の欄に搬送した旨が追記されます。
13. 請求：どのような請求をしたか、選択します。
    - 院内治療：院内で治療した場合(5万円)
    - 現場治療：現場で治療した場合(10万円)
    - 事件対応：原則として警察のみ対象。一般市民が事件に巻き込まれた場合は対象外。
    ただし、警察の不手際で事件に意図せず巻き込んだ場合、チェイス中に巻き込んだ場合などに関しては
    その事実が警察から申し出があり事実確認できる場合のみ隊員の裁量で適用しても良い。
    ゆがみ対応・C対応・その他補填：患者さんの責任によらないゆがみなどに対して補償として無料で治療・蘇生した場合に使用

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/3dd8de90-a347-4ef4-bdf2-e7224e41f841)

14. 備考：患者様がどういう状況で怪我をしたか、誰かに連れてこられたか、患者様以外に請求を切ったか、などその治療に対しての背景の説明書きを追記する。ただし、推測などは書かずに感想に書くこと。
15. 感想：上記備考以外、事実以外のどうでもいいことを書いても良い。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/0de09d5f-310e-4615-87fd-b675f20d8f79)

16. 文書を生成：入力事項を元に、カルテを出力します。出力結果は生成文書欄に表示されるほか、後述のモード設定によりクリップボードにコピーされます。
17. クリア：入力事項を全て削除し、デフォルト画面に戻します。（名前設定・場所設定・治療者を除く）
18. 名前設定表示/非表示：この欄に入力した文字列を対象に、(4)名前検索で入力された名前が検索されます。（簡易データベース）
    次の表記方法で、1行ごとに記入してください。
    >表記名;読み仮名
    
    >例：多田野　かかし;ただのかかしtadanokakasitadanokakashi
    
    読み仮名はいくら長くても出力結果には影響がないので、いろんな表記方法で書いておくと便利です。
    
19. 場所設定表示/非表示：この欄に入力した文字列から、(8)場所検索で入力された場所が検索されます。（簡易データベース）
    名前の表記方法と同じです。表記名;読み仮名で記載してください。
20. 保存：治療者、名前設定、場所設定、自動コピーの値をブラウザのストレージに保存します。
    なお、それらは値を変更することで自動的に保存がされるため、明示的に保存する必要は基本的にありません。おまじない程度の効果です。

![image](https://github.com/himatchi/MiGTAKarteGenerator/assets/17907095/7b64b95c-4864-43af-b6b4-93268241542e)

21. 生成文書：生成したカルテが表示されます。
22. クリップボードに自動コピー：チェックが入っている場合、(16)文書を生成ボタンを押した際に自動で出力結果がクリップボードにコピーされます。
23. エクスポート：クリックした時点での「治療者、名前設定、場所設定」の値がjsonファイルとして保存されます。
24. インポート：エクスポートで出力したjsonファイルを読み込ませることで、設定を復元できます。 ***現在の設定が上書きされるため、事前に何かしらの方法で現在の設定をバックアップしておくことを推奨します。***

## 作成者
救急隊：槌谷ひま（槌谷閑助）@himatchi
